<!DOCTYPE html>
<html>
<head>
    <title>ThousandEyes PoV Visualizer - Results</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container py-4 px-3 mx-auto">
    <div class="result-container">
        <!--<h2>Your ThousandEyes PoV Setup</h2> -->
        <nav id="navbar-example2" class="navbar bg-body-tertiary px-3 mb-3">
          <a class="navbar-brand" href="#">Your ThousandEyes PoV Setup</a>
          <ul class="nav nav-pills">
            <li class="nav-item">
              <a class="nav-link" href="#cea">Cloud & Enterprise Tests</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#endpoint">Endpoint Tests</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#alertrules">Alert Rules</a>
            </li>
          </ul>
        </nav>
        <p><strong>Bearer Token used:</strong> {{.UserInput}} <strong>  Account-Group:</strong> {{.UserAID}}</p>
        <p><a href="/">← Go back to form</a></p>
    </div>
    <div data-bs-spy="scroll" data-bs-target="#navbar-example2" data-bs-root-margin="0px 0px -40%" data-bs-smooth-scroll="true" class="scrollspy-example p-3 rounded-2" tabindex="0">
    <h4 id="cea">Cloud & Enterprise Tests</h4>
{{$root := .}}    
{{range .Labels.Tags}}
    {{if or (eq .ObjectType "test")  (eq .ObjectType "endpoint-test") }}
      {{if gt (len .Assignments) 0}}
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Label: {{.Value}}</h4>
            <!--<h6 class="card-subtitle mb-2 text-body-secondary">Label ID: {{.ID}}</h6> -->
            <h6 class="card-subtitle mb-2 text-body-secondary">{{.Description}}</h6>
            <br>
            {{$currentID := .ID}}
            {{range $root.Diagrams.Tags}}
                {{if eq .LabelID $currentID}}
            <pre class="mermaid">
{{.Diagram}}
            </pre>    
            <br>      
            <p class="d-inline-flex gap-1">
              <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapse{{$currentID}}" role="button" aria-expanded="false" aria-controls="collapseExample">Show Mermaid Code</a>
            </p>
            <div class="collapse" id="collapse{{$currentID}}">
              <div class="card card-body">
                <pre>
{{.Diagram}}
                </pre>
              </div>
            </div>
              {{end}}
             {{end}} 
          </div>
        </div>
        <br>
      {{end}}
    {{end}}
{{end}}


        <h4 id="endpoint">Endpoint Tests</h4>
        <p>Roadmap</p>
         <h4 id="alertrules">Alert Rules</h4>
        <p>Roadmap</p>
    </div>
       <div class="result-container">
        <!--<h2>Your ThousandEyes PoV Setup</h2> -->
        <nav id="navbar-example2" class="navbar bg-body-tertiary px-3 mb-3">
          <a class="navbar-brand" href="#">Your ThousandEyes PoV Setup</a>
          <ul class="nav nav-pills">
            <li class="nav-item">
              <a class="nav-link" href="#cea">Cloud & Enterprise Tests</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#endpoint">Endpoint Tests</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#alertrules">Alert Rules</a>
            </li>
          </ul>
        </nav>
        <p><strong>Bearer Token used:</strong> {{.UserInput}}</p>
        <p><a href="/">← Go back to form</a></p>
    </div>
	<script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>
</body>
<footer class="bg-dark text-light py-4 mt-5">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <h5>ThousandEyes PoV Visualizer</h5>
        <p>by Dirk Woellhaf (dwoellha@cisco.com)</p>
      </div>
      <div class="col-md-3">
      </div>
      <div class="col-md-3">
      </div>
    </div>
    <hr class="my-4">
    <div class="row">
      <div class="col-12 text-center">
        <p class="mb-0">&copy; 2025 Cisco ThousandEyes. All rights reserved.</p>
      </div>
    </div>
  </div>
</footer>
</html>